#!/bin/bash
#
# Ssh to a LXD container by name.
#

lxd_ip() {
    lxc list $1 --columns=4 | awk '(NR == 4) { print $2; }'
}


hostname="$1"
shift 1


if [ ! "$hostname" ]; then
    echo "Missing container name"
    exit 1
fi

ip=$(lxd_ip "$hostname")
if [ ! "$ip" ]; then
    echo "Address not found"
    exit 2
fi

ssh "$ip" "$@"
